<%= form_for([@room, @room.reservations.new]) do |f| %>
    <div class="row">
      <div class="col-md-12 price_tag">
        <span>€<%= @room.price %></span>
        <span class="pull-right">Per night</span>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <label>Arrival</label>
        <%= f.text_field :start_date, readonly: 'true', placeholder: 'jj/mm/aaaa', class: 'form-control' %>
      </div>
      <div class="col-md-6">
        <label>Departure</label>
        <%= f.text_field :end_date, readonly: 'true', placeholder: 'jj/mm/aaaa', class: 'form-control', disabled: 'true' %>
      </div>
    </div>

    <%= f.hidden_field :room_id, value: @room.id %>
    <%= f.hidden_field :price, value: @room.price %>
    <%= f.hidden_field :total, id: 'reservation_total' %>

    <% unless current_user %>
        <h5>You must be logged in to book this apartment.</h5>
    <% end %>

    <div id="preview" style="display: none">
      <table class="reservation-table">
        <tbody>
        <tr>
          <td>Nights(s)</td>
          <td><span id="reservation_days"></span></td>
        </tr>
        <tr>
          <td>Total</td>
          <td><span id="reservation_sum"></span>€</td>
        </tr>
        </tbody>
      </table>
    </div>
    <%= f.submit 'Booking request', class: 'btn btn-primary wide' %>
<% end %>

<script>
    $(function () {
        $('#reservation_start_date').datepicker({
            dateFormat: 'dd-mm-yy',
            monthNames: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
            dayNamesMin: ['D', 'L', 'M', 'M', 'J', 'V', 'S']
        });
        $('#reservation_end_date').datepicker({
            dateFormat: 'dd-mm-yy',
            monthNames: ['Janvier', 'February', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'],
            dayNamesMin: ['D', 'L', 'M', 'M', 'J', 'V', 'S']
        });
    });
</script>